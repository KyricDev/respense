import { expensescontext } from '../data/usercontext.js';
export default async function (req, res, next) {
    console.log(req.session.userid);
    console.log(req.body);
    let month = req.body.month;
    let periodStart = req.body.periodStart;
    let periodEnd = req.body.periodEnd;
    if (month == '')
        month = 0;
    if (periodStart == '')
        periodStart = 0;
    if (periodEnd == '')
        periodEnd = 0;
    try {
        await expensescontext.build({
            type: req.body.name,
            value: req.body.value,
            month: month,
            isRecurring: req.body.isChecked,
            periodStart: periodStart,
            periodEnd: periodEnd,
            UserId: req.session.userid
        })
            .save();
    }
    catch (err) {
        console.log(err);
    }
    res.status(202).send({
        status: 'success'
    })
        .end();
    return next();
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkZXhwZW5zZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcGkvYWRkZXhwZW5zZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFekQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLFdBQVcsR0FBb0IsRUFBRSxHQUFxQixFQUFFLElBQTBCO0lBQ2xHLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QixJQUFJLEtBQUssR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUMzQixJQUFJLFdBQVcsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUN2QyxJQUFJLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUVuQyxJQUFJLEtBQUssSUFBSSxFQUFFO1FBQUUsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUMzQixJQUFJLFdBQVcsSUFBSSxFQUFFO1FBQUUsV0FBVyxHQUFHLENBQUMsQ0FBQztJQUN2QyxJQUFJLFNBQVMsSUFBSSxFQUFFO1FBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQztJQUVuQyxJQUFHO1FBQ0MsTUFBTSxlQUFlLENBQUMsS0FBSyxDQUFDO1lBQ3hCLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUk7WUFDbkIsS0FBSyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSztZQUNyQixLQUFLLEVBQUUsS0FBSztZQUNaLFdBQVcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVM7WUFDL0IsV0FBVyxFQUFFLFdBQVc7WUFDeEIsU0FBUyxFQUFFLFNBQVM7WUFDcEIsTUFBTSxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTTtTQUM3QixDQUFDO2FBQ0QsSUFBSSxFQUFFLENBQUM7S0FDWDtJQUNELE9BQU0sR0FBRyxFQUFDO1FBQ04sT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNwQjtJQUVELEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ2pCLE1BQU0sRUFBRSxTQUFTO0tBQ3BCLENBQUM7U0FDRCxHQUFHLEVBQUUsQ0FBQztJQUVQLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDbEIsQ0FBQyJ9